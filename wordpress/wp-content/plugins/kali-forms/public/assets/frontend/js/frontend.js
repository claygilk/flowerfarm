(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){"use strict";n.r(t);var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(1),c=n(12),u=n.n(c),l=n(13),d=n.n(l),f=n(14),h=n.n(f),p=n(15),m=n.n(p);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var k={gatherProducts:function(){var e=this,t={action:"kaliforms_form_verify_products",data:{formId:this.formId}};this.axios.post(KaliFormsObject.ajaxurl,this.Qs.stringify(t)).then(function(t){e._products="ok"===t.data.response?[]:t.data.response}).catch(function(e){console.log(e)})},getCart:function(){var e=this,t=0,n="USD",r=[];return this._products.map(function(i){e._payee=void 0!==i.payee?i.payee:null,"product"===i.type&&(t+=parseInt(i.price),r.push(i.caption)),"multipleProducts"===i.type&&e.isSelectedPrice(i)&&(t+=parseInt(i.price),r.push(i.caption)),n=i.currency}),{price:t.toFixed(2),description:r.join(","),currency:n}},isSelectedPrice:function(e){var t=b(document.querySelectorAll('[data-internal-id="'.concat(e.id.toLowerCase(),'"]')));return!!t.length&&(void 0!==t.find(function(e){return e.checked})&&(parseInt(t.find(function(e){return e.checked}).value)===parseInt(e.price)||void 0))},onApprove:function(e,t){var n=this;return this.loading=!0,t.order.capture().then(function(e){n.payments={payment_id:e.id,payer:e.payer,status:e.status},n.loading=!1,n.form.dispatchEvent(new Event("submit"))})},createOrder:function(e,t){var n=this.getCart(),r={purchase_units:[{amount:{value:n.price,currency_code:n.currency},description:n.description}]};return null!==this._payee&&(r.purchase_units[0].payee={email_address:this._payee}),t.order.create(r)},onInit:function(e,t){var n=this;this.validForm()?t.enable():t.disable(),this.form.addEventListener("change",function(e){n.validForm()?t.enable():t.disable()})},onClick:function(e,t){b(this.formElements).map(function(e){e.reportValidity()})},handlePayPalPayment:function(e){this.gatherProducts(),this.createOrder=this.createOrder.bind(this),this.onApprove=this.onApprove.bind(this),this.onInit=this.onInit.bind(this),this.onClick=this.onClick.bind(this),e.Buttons({onInit:this.onInit,onClick:this.onClick,createOrder:this.createOrder,onApprove:this.onApprove}).render("#kaliforms-paypal-button-container")}};function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}var P=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._timeout=7e3,this._url=KaliFormsObject.ajaxurl,this._labels=KaliFormsObject.translations.filePond}return g(e,[{key:"url",get:function(){return this._url},set:function(e){this._url=e}},{key:"timeout",get:function(){return this._timeout},set:function(e){this._timeout=parseInt(e)}},{key:"process",get:function(){var e=this,t=this;return function(n,r,i,a,o,s,c){var u=new FormData;u.append("action","kaliforms_form_upload_file"),u.append(n,r,r.name);var l=new XMLHttpRequest;return l.open("POST",e.url),l.upload.onprogress=function(e){s(e.lengthComputable,e.loaded,e.total)},l.onload=function(){if(l.status>=200&&l.status<300){if(t.isJson(l.response))if(JSON.parse(l.response).hasOwnProperty("errors"))return o("something went wrong");a(l.responseText)}else o("oh no")},l.send(u),{abort:function(){l.abort(),c()}}}}},{key:"revert",get:function(){var e=this;return function(t,n,r){var i=new FormData;i.append("action","kaliforms_form_delete_uploaded_file"),i.append("id",parseFloat(t));var a=new XMLHttpRequest;a.open("POST",e.url),a.send(i),n()}}},{key:"settings",get:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}({server:{url:this.url,timeout:this.timeout,process:this.process,revert:this.revert}},this._labels)}}]),g(e,[{key:"isJson",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}}]),e}());s.setOptions(P.settings),s.registerPlugin(u.a),s.registerPlugin(d.a),s.registerPlugin(h.a),s.registerPlugin(m.a);var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.getAttribute("id"),this.formId=parseInt(t.getAttribute("data-form-id")),this.form=t,this.formElements=this.form.elements,this.uploadFields=[],this.nonce=KaliFormsObject.ajax_nonce,this.axios=i.a,this.Qs=o.a,this.handleFileUploads(),this.handleRecaptcha(),this.handleSubmit(),this.handlePayments(k),"undefined"!=typeof paypal&&this.handlePayPalPayment(paypal),document.dispatchEvent(new CustomEvent("kaliFormProcessConstructed",{detail:this}))}return _(e,[{key:"loading",set:function(e){this._loading=e,e?this.appendLoader():this.removeLoader()},get:function(){return this._loading}},{key:"valid",get:function(){var e={formValidation:!0};return this.grecaptcha&&(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){A(e,t,n[t])})}return e}({},e,{recaptcha:this.grecaptchaValidation})),this.grecaptcha?e.formValidation&&e.recaptcha:e.formValidation}}]),_(e,[{key:"handlePayments",value:function(e){for(var t in e)this[t]=e[t].bind(this);this.payments=null,this.paymentForm=!0}},{key:"handleFileUploads",value:function(){var e=this;w(this.form.querySelectorAll("[type='file']")).map(function(t){var n=s.create(t);e.uploadFields.push(t.getAttribute("name"));var r={required:t.hasAttribute("required"),name:t.getAttribute("name"),disabled:t.hasAttribute("readonly"),allowImagePreview:t.hasAttribute("imagepreview"),maxFileSize:t.getAttribute("data-maxfilesize"),instantUpload:t.hasAttribute("instantupload"),acceptedFileTypes:null!==t.getAttribute("data-acceptedextensions")?t.getAttribute("data-acceptedextensions").split(","):null,fileRenameFunction:function(e){var n=t.getAttribute("data-fileprefix");return null!==n?"".concat(n).concat(e.name):e.name}};n.setOptions(r)})}},{key:"handleRecaptcha",value:function(){var e=this;this.grecaptcha=!1;var t=document.querySelectorAll("[data-field-type='grecaptcha']");(t=w(t)).length&&"undefined"!=typeof grecaptcha&&(console.log("x"),this.grecaptcha=!0,grecaptcha.ready(function(){t.map(function(t){grecaptcha.render(t.getAttribute("id"),{sitekey:t.getAttribute("data-sitekey"),callback:e.verifyRecaptchaCallback.bind(e)})})}))}},{key:"verifyRecaptchaCallback",value:function(e){var t=this,n={action:"kaliforms_form_verify_recaptcha",data:{formId:this.formId,nonce:this.nonce,token:e}};this.axios.post(KaliFormsObject.ajaxurl,this.Qs.stringify(n)).then(function(e){e.data.hasOwnProperty("error")?t.throwError():t.grecaptchaValidation=e.data.response.success}).catch(function(e){console.log(e)})}},{key:"setupValidation",value:function(){}},{key:"handleSubmit",value:function(){var e=this;this.form.addEventListener("submit",function(t){t.preventDefault(),document.getElementById("kaliforms-global-error-message-".concat(e.formId)).style.display="none",e.loading=!0,e.valid?e.makeRequest():e.throwError()},!0)}},{key:"throwError",value:function(){document.getElementById("kaliforms-global-error-message-".concat(this.formId)).style.display="block",this.loading=!1}},{key:"makeRequest",value:function(){var e=this,t={action:"kaliforms_form_process",data:this._getFormData(),extraArgs:this._getExtra()};this.paymentForm&&(t.payments=this.payments),i.a.post(KaliFormsObject.ajaxurl,o.a.stringify(t)).then(function(t){t.data.hasOwnProperty("error")?e.throwError():(e.loading=!1,e.showThankYouMessage(t.data),t.data.hasOwnProperty("redirect_url")&&""!==t.data.redirect_url&&setTimeout(function(){return window.location.href=t.data.redirect_url},5e3))}).catch(function(e){console.log(e)})}},{key:"_getExtra",value:function(){return this.uploadFields}},{key:"_getFormData",value:function(){var e={formId:this.formId,nonce:this.nonce};return w(this.formElements).map(function(t){switch(t.getAttribute("type")){case"checkbox":var n=[];w(document.getElementsByName(t.getAttribute("name"))).map(function(e){return!!e.checked&&n.push(e.value)}),e[t.getAttribute("name")]=n;break;case"radio":var r="";w(document.getElementsByName(t.getAttribute("name"))).map(function(e){return!!e.checked&&(r=e.value)}),e[t.getAttribute("name")]=r;break;case"submit":break;case"choices":var i=t.querySelectorAll("option:checked");e[t.getAttribute("name")]=Array.from(i).map(function(e){return e.value});break;default:"null"!==t.getAttribute("name")&&(e[t.getAttribute("name")]=t.value)}}),e}},{key:"showThankYouMessage",value:function(e){var t=this;this.form.classList.add("fade-out-top");var n=this.whichAnimationEvent();n&&this.form.addEventListener(n,function(){t.form.insertAdjacentHTML("beforebegin",'<div id="kaliforms-thank-you-message">'.concat(e.thank_you_message,"</div>")),t.form.parentNode.removeChild(t.form)})}},{key:"appendLoader",value:function(){this.form.classList.add("kaliform-loading");this.form.insertAdjacentHTML("beforeend",'<div id="kaliform-loader-container" class="kaliform-loader-container"><div class="kaliform-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>')}},{key:"removeLoader",value:function(){var e=document.getElementById("kaliform-loader-container");this.form.classList.remove("kaliform-loading"),this.form.removeChild(e)}},{key:"validForm",value:function(){var e=!0;return w(this.formElements).map(function(t){t.checkValidity()||(e=!1)}),e}},{key:"whichAnimationEvent",value:function(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}}]),e}();n(37);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".kaliforms-form-container");Array.prototype.forEach.call(e,function(e){new E(e)})},!1)},37:function(e,t){}},[[36,1,2]]]);